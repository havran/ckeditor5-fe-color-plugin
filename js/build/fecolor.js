!function(e,o){"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define([],o):"object"==typeof exports?exports.CKEditor5=o():(e.CKEditor5=e.CKEditor5||{},e.CKEditor5.fecolor=o())}(self,()=>(()=>{var __webpack_modules__=[(module,__unused_webpack_exports,__webpack_require__)=>{eval('{module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ 4))("./src/core.js");\n\n//# sourceURL=webpack://CKEditor5.fecolor/delegated_./core.js_from_dll-reference_CKEditor5.dll?\n}')},(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FECOLOR = void 0;\nexports.addColorSelectorToDropdown = addColorSelectorToDropdown;\nconst ui_1 = __webpack_require__(/*! ckeditor5/src/ui */ 5);\nexports.FECOLOR = 'fecolor';\nfunction addColorSelectorToDropdown({ dropdownView, colors, columns, removeButtonLabel, colorPickerLabel, documentColorsLabel, documentColorsCount, colorPickerViewConfig }) {\n    const locale = dropdownView.locale;\n    const colorSelectorView = new ui_1.ColorSelectorView(locale, {\n        colors,\n        columns,\n        removeButtonLabel,\n        colorPickerLabel,\n        documentColorsLabel,\n        documentColorsCount,\n        colorPickerViewConfig\n    });\n    dropdownView.colorSelectorView = colorSelectorView;\n    dropdownView.panelView.children.add(colorSelectorView);\n    return colorSelectorView;\n}\n\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/src/utils.ts?\n}")},function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval("{\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FeColorUI = void 0;\nconst core_1 = __webpack_require__(/*! ckeditor5/src/core */ 0);\nconst ui_1 = __webpack_require__(/*! ckeditor5/src/ui */ 5);\nconst utils_1 = __webpack_require__(/*! ./utils */ 1);\nconst font_color_svg_1 = __importDefault(__webpack_require__(/*! ../theme/icons/font-color.svg */ 8));\nclass FeColorUI extends core_1.Plugin {\n    init() {\n        const editor = this.editor;\n        const locale = editor.locale;\n        const command = editor.commands.get(utils_1.FECOLOR);\n        const config = editor.config.get(utils_1.FECOLOR);\n        const colorDefinitions = config.colors.map((feColor) => {\n            var _a;\n            return ({\n                color: feColor.color,\n                label: feColor.label,\n                options: {\n                    hasBorder: ((_a = feColor.options) === null || _a === void 0 ? void 0 : _a.hasBorder) || false\n                }\n            });\n        });\n        editor.ui.componentFactory.add(utils_1.FECOLOR, locale => {\n            const dropdownView = (0, ui_1.createDropdown)(locale);\n            let dropdownContentRendered = false;\n            const colorSelectorView = (0, utils_1.addColorSelectorToDropdown)({\n                dropdownView,\n                colors: colorDefinitions,\n                columns: 5,\n                removeButtonLabel: 'Remove color',\n                colorPickerLabel: 'Color picker',\n                documentColorsLabel: 'Document colors',\n                documentColorsCount: 4,\n                colorPickerViewConfig: false\n            });\n            colorSelectorView.bind('selectedColor').to(command, 'value');\n            dropdownView.buttonView.set({\n                label: 'Select color',\n                icon: font_color_svg_1.default,\n                tooltip: true\n            });\n            dropdownView.extendTemplate({\n                attributes: {\n                    class: 'ck-color-ui-dropdown'\n                }\n            });\n            dropdownView.bind('isEnabled').to(command);\n            dropdownView.on('change:isOpen', (evt, name, isVisible) => {\n                if (!dropdownContentRendered) {\n                    dropdownContentRendered = true;\n                    dropdownView.colorSelectorView.appendUI();\n                }\n                if (isVisible) {\n                    colorSelectorView.updateSelectedColors();\n                    colorSelectorView.showColorGridsFragment();\n                }\n            });\n            dropdownView.colorSelectorView.on('execute', (evt, data) => {\n                if (dropdownView.isOpen) {\n                    editor.execute(utils_1.FECOLOR, {\n                        value: data.value\n                    });\n                }\n                if (data.source !== 'colorPicker') {\n                    editor.editing.view.focus();\n                }\n            });\n            return dropdownView;\n        });\n    }\n}\nexports.FeColorUI = FeColorUI;\n\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/src/fecolorui.ts?\n}")},function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('{\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.getFeColorMap = exports.getFeColorClasses = void 0;\nconst TwoWayMap_1 = __importDefault(__webpack_require__(/*! ./TwoWayMap */ 11));\nconst getFeColorClasses = (config) => {\n    const classes = [];\n    config.colors.forEach((color) => {\n        classes.push(color.class);\n    });\n    return classes;\n};\nexports.getFeColorClasses = getFeColorClasses;\nconst getFeColorMap = (config) => {\n    const map = new TwoWayMap_1.default();\n    config.colors.forEach((color) => {\n        map.set(color.color, color.class);\n    });\n    return map;\n};\nexports.getFeColorMap = getFeColorMap;\n\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/src/lib/Colors.ts?\n}')},e=>{"use strict";e.exports=CKEditor5.dll},(module,__unused_webpack_exports,__webpack_require__)=>{eval('{module.exports = (__webpack_require__(/*! dll-reference CKEditor5.dll */ 4))("./src/ui.js");\n\n//# sourceURL=webpack://CKEditor5.fecolor/delegated_./ui.js_from_dll-reference_CKEditor5.dll?\n}')},(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('{\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nconst fecolor_1 = __webpack_require__(/*! ./fecolor */ 7);\nexports["default"] = {\n    FeColor: fecolor_1.FeColor,\n};\n\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/src/index.ts?\n}')},(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FeColor = void 0;\nconst core_1 = __webpack_require__(/*! ckeditor5/src/core */ 0);\nconst fecolorui_1 = __webpack_require__(/*! ./fecolorui */ 2);\nconst fecolorediting_1 = __webpack_require__(/*! ./fecolorediting */ 9);\nclass FeColor extends core_1.Plugin {\n    static get requires() {\n        return [fecolorediting_1.FeColorEditing, fecolorui_1.FeColorUI];\n    }\n    static get pluginName() {\n        return 'FeColor';\n    }\n}\nexports.FeColor = FeColor;\n\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/src/fecolor.ts?\n}")},(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ("<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\"><path d=\\"M12.4 10.3 10 4.5l-2.4 5.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2\\"/></svg>");\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/theme/icons/font-color.svg?\n}')},(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval("{\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.FeColorEditing = void 0;\nconst core_1 = __webpack_require__(/*! ckeditor5/src/core */ 0);\nconst fecolorcommand_1 = __webpack_require__(/*! ./fecolorcommand */ 10);\nconst Colors_1 = __webpack_require__(/*! ./lib/Colors */ 3);\nconst utils_1 = __webpack_require__(/*! ./utils */ 1);\nclass FeColorEditing extends core_1.Plugin {\n    init() {\n        this._defineSchema();\n        this._defineConverters();\n    }\n    _defineSchema() {\n        const schema = this.editor.model.schema;\n        schema.extend('$text', { allowAttributes: utils_1.FECOLOR });\n        schema.register(utils_1.FECOLOR, {\n            inheritAllFrom: '$text',\n            isInline: true,\n            allowContentOf: '$block'\n        });\n    }\n    _defineConverters() {\n        const conversion = this.editor.conversion;\n        const config = this.editor.config.get(utils_1.FECOLOR);\n        const mapColorToClass = (0, Colors_1.getFeColorMap)(config);\n        const classes = (0, Colors_1.getFeColorClasses)(config);\n        conversion.for('downcast').attributeToElement({\n            model: utils_1.FECOLOR,\n            view: (modelAttributeValue, { writer }) => {\n                var _a;\n                if (!modelAttributeValue) {\n                    return;\n                }\n                console.log('>>> model > view', modelAttributeValue, '> mapped >', mapColorToClass.getForward(modelAttributeValue));\n                return writer.createAttributeElement('span', { class: (_a = mapColorToClass.getForward(modelAttributeValue)) !== null && _a !== void 0 ? _a : modelAttributeValue });\n            },\n            converterPriority: 'high'\n        });\n        classes.forEach(classString => {\n            conversion.for('upcast').elementToAttribute({\n                view: {\n                    name: 'span',\n                    classes: [classString]\n                },\n                model: {\n                    key: utils_1.FECOLOR,\n                    value: viewElement => {\n                        var _a;\n                        return (_a = mapColorToClass.getReverse(viewElement.getAttribute('class'))) !== null && _a !== void 0 ? _a : viewElement.getAttribute('class');\n                    }\n                },\n                converterPriority: 'high'\n            });\n        });\n        this.editor.commands.add(utils_1.FECOLOR, new fecolorcommand_1.FeColorCommand(this.editor));\n    }\n}\nexports.FeColorEditing = FeColorEditing;\n\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/src/fecolorediting.ts?\n}")},(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('{\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.FeColorCommand = void 0;\nconst core_1 = __webpack_require__(/*! ckeditor5/src/core */ 0);\nconst utils_1 = __webpack_require__(/*! ./utils */ 1);\nclass FeColorCommand extends core_1.Command {\n    refresh() {\n        const model = this.editor.model;\n        const doc = model.document;\n        this.value = doc.selection.getAttribute(utils_1.FECOLOR);\n        this.isEnabled = model.schema.checkAttributeInSelection(doc.selection, utils_1.FECOLOR);\n    }\n    execute(options = {}) {\n        const model = this.editor.model;\n        const document = model.document;\n        const selection = document.selection;\n        const value = options.value;\n        const updateAttribute = (writer) => {\n            if (selection.isCollapsed) {\n                if (value) {\n                    writer.setSelectionAttribute(utils_1.FECOLOR, value);\n                }\n                else {\n                    writer.removeSelectionAttribute(utils_1.FECOLOR);\n                }\n            }\n            else {\n                const ranges = model.schema.getValidRanges(selection.getRanges(), utils_1.FECOLOR);\n                for (const range of ranges) {\n                    if (value) {\n                        writer.setAttribute(utils_1.FECOLOR, value, range);\n                    }\n                    else {\n                        writer.removeAttribute(utils_1.FECOLOR, range);\n                    }\n                }\n            }\n        };\n        model.change(writer => {\n            updateAttribute(writer);\n        });\n    }\n}\nexports.FeColorCommand = FeColorCommand;\n\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/src/fecolorcommand.ts?\n}')},(__unused_webpack_module,exports)=>{"use strict";eval('{\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nclass TwoWayMap {\n    constructor() {\n        this.forwardMap = new Map();\n        this.reverseMap = new Map();\n    }\n    set(key, value) {\n        this.forwardMap.set(key, value);\n        this.reverseMap.set(value, key);\n    }\n    getForward(key) {\n        return this.forwardMap.get(key);\n    }\n    getReverse(value) {\n        return this.reverseMap.get(value);\n    }\n    hasForward(key) {\n        return this.forwardMap.has(key);\n    }\n    hasReverse(value) {\n        return this.reverseMap.has(value);\n    }\n    delete(key) {\n        const value = this.forwardMap.get(key);\n        if (value !== undefined) {\n            this.forwardMap.delete(key);\n            this.reverseMap.delete(value);\n            return true;\n        }\n        return false;\n    }\n}\nexports["default"] = TwoWayMap;\n\n\n//# sourceURL=webpack://CKEditor5.fecolor/./js/ckeditor5_plugins/fecolor/src/lib/TwoWayMap.ts?\n}')}],__webpack_module_cache__={};function __webpack_require__(e){var o=__webpack_module_cache__[e];if(void 0!==o)return o.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,o)=>{for(var r in o)__webpack_require__.o(o,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})},__webpack_require__.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(6);return __webpack_exports__=__webpack_exports__.default,__webpack_exports__})());